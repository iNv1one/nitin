# Django SaaS Telegram Parser

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π SaaS —Å–µ—Ä–≤–∏—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Telegram —á–∞—Ç–æ–≤ —Å –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –ò–ò.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Telegram —á–∞—Ç–æ–≤** - –æ–¥–∏–Ω –º–∞—Å—Ç–µ—Ä-–±–æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ —á–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üë• **–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞** - –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ–π –ª–∏—á–Ω—ã–π –±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- üîç **–ì–∏–±–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –≥—Ä—É–ø–ø—ã –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ò–ò-—Ñ–∏–ª—å—Ç—Ä–æ–≤ (OpenAI)
- üíº **CRM —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–æ–≤–æ–µ, –≤ —Ä–∞–±–æ—Ç–µ, –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ)
- üìä **Dashboard** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- üîí **–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫** - –±–∞–∑–æ–≤—ã–π, –ø—Ä–µ–º–∏—É–º –∏ –±–∏–∑–Ω–µ—Å —Ç–∞—Ä–∏—Ñ—ã —Å –ª–∏–º–∏—Ç–∞–º–∏
- ‚ö° **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - Celery –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- üõ°Ô∏è **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã** - heartbeat, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: Django 4.2.0 + Django REST Framework
- **Database**: PostgreSQL (SQLite –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **Queue**: Celery + Redis
- **Telegram**: Telethon (–º–∞—Å—Ç–µ—Ä-–ø–∞—Ä—Å–µ—Ä) + PyTelegramBotAPI (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –±–æ—Ç—ã)
- **AI**: OpenAI GPT –¥–ª—è smart-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **Frontend**: Bootstrap 5 + JavaScript
- **Deployment**: Docker + Docker Compose + Nginx

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **Master Telegram Parser** (`apps/telegram_parser/telegram_client.py`)
   - –ï–¥–∏–Ω—ã–π –±–æ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –≤—Å–µ —á–∞—Ç—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å heartbeat –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Celery queue

2. **Message Processor** (`apps/telegram_parser/message_processor.py`)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä—Å–µ—Ä–∞
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ –ò–ò
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –±–æ—Ç–æ–≤

3. **User Management** (`apps/users/`)
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
   - –õ–∏–º–∏—Ç—ã –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º (—Å–æ–æ–±—â–µ–Ω–∏—è, —á–∞—Ç—ã, –≥—Ä—É–ø–ø—ã –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤)
   - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–æ–≤

4. **Dashboard** (`apps/dashboard/`)
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
   - CRM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–°–º. `QUICKSTART.md` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

### Production –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
wget https://raw.githubusercontent.com/yourrepo/telegram-parser-saas/main/auto-deploy.sh
chmod +x auto-deploy.sh
./auto-deploy.sh
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**

–°–º. —Ñ–∞–π–ª `DEPLOYMENT.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

**–í–∞—Ä–∏–∞–Ω—Ç 3: Quick Start**

–°–º. —Ñ–∞–π–ª `PRODUCTION.md` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
python manage.py runserver
celery -A config worker -l info --pool=solo

# Production
sudo systemctl start telegram-parser telegram-parser-celery
sudo systemctl status telegram-parser telegram-parser-celery

# –ò–º–ø–æ—Ä—Ç —á–∞—Ç–æ–≤
python manage.py import_my_chats

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
git pull && ./deploy.sh
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
```bash
git clone <repository>
cd telegram-parser-saas
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
DEBUG=True
SECRET_KEY=your-secret-key-here
TELEGRAM_BOT_TOKEN=your-bot-token-here
TELEGRAM_ADMIN_CHAT_ID=your-admin-chat-id
OPENAI_API_KEY=your-openai-api-key
REDIS_URL=redis://localhost:6379/0
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
```bash
python manage.py migrate
python manage.py createsuperuser
```

4. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**
```bash
# Terminal 1 - Django
python manage.py runserver

# Terminal 2 - Celery worker
celery -A telegram_parser_saas worker -l info

# Terminal 3 - Celery beat (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
celery -A telegram_parser_saas beat -l info

# Terminal 4 - Redis (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–∏—Å—Ç–µ–º–Ω–æ)
redis-server
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω —Å Docker

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `docker-compose.yml`, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
```yaml
environment:
  - TELEGRAM_BOT_TOKEN=your_real_bot_token
  - TELEGRAM_ADMIN_CHAT_ID=your_real_admin_chat_id
  - OPENAI_API_KEY=your_real_openai_api_key
  - DB_PASSWORD=strong_password_here
```

2. **–ó–∞–ø—É—Å–∫**
```bash
docker-compose up -d
```

3. **–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker-compose exec web python manage.py createsuperuser

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f web
docker-compose logs -f celery
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–æ–≤

### –ú–∞—Å—Ç–µ—Ä-–±–æ—Ç (–¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞)
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∫–∞–∫ `TELEGRAM_BOT_TOKEN`
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤–æ –≤—Å–µ —á–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å
4. –î–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –±–æ—Ç—ã (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
1. –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç ID —Å–≤–æ–µ–≥–æ —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @userinfobot)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegram-parser-saas/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ users/                      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py              # –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å User —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py               # Django admin –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ views.py               # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ telegram_parser/           # –Ø–¥—Ä–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py             # KeywordGroup, MonitoredChat, ProcessedMessage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram_client.py    # –ú–∞—Å—Ç–µ—Ä Telegram –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message_processor.py  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks.py              # Celery –∑–∞–¥–∞—á–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py              # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ dashboard/                 # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ       ‚îú‚îÄ‚îÄ views.py              # Dashboard, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ urls.py               # URL —Ä–æ—É—Ç–∏–Ω–≥
‚îÇ       ‚îî‚îÄ‚îÄ templates/            # HTML —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ templates/                     # –û–±—â–∏–µ —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ base.html                 # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/                # Dashboard —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ registration/             # –®–∞–±–ª–æ–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ telegram_parser_saas/         # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç Django
‚îÇ   ‚îú‚îÄ‚îÄ settings.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ settings_production.py    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ celery.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Celery
‚îÇ   ‚îî‚îÄ‚îÄ urls.py                   # –ì–ª–∞–≤–Ω—ã–π URL —Ä–æ—É—Ç–∏–Ω–≥
‚îú‚îÄ‚îÄ requirements.txt              # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ docker-compose.yml           # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                   # Docker –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

### User (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
```python
class User(AbstractUser):
    subscription_plan = models.CharField(max_length=20, choices=SUBSCRIPTION_CHOICES, default='basic')
    telegram_bot_token = models.CharField(max_length=255, blank=True)
    notification_chat_id = models.CharField(max_length=50, blank=True)
    messages_this_month = models.IntegerField(default=0)
    is_active = models.BooleanField(default=True)
```

### KeywordGroup (–≥—Ä—É–ø–ø—ã –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤)
```python
class KeywordGroup(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    name = models.CharField(max_length=100)
    keywords = models.TextField()  # JSON —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
    use_ai_filter = models.BooleanField(default=False)
    ai_prompt = models.TextField(blank=True)
    is_active = models.BooleanField(default=True)
```

### ProcessedMessage (CRM –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π)
```python
class ProcessedMessage(models.Model):
    CRM_STATUS_CHOICES = [
        ('new', '–ù–æ–≤–æ–µ'),
        ('in_progress', '–í —Ä–∞–±–æ—Ç–µ'),
        ('completed', '–ó–∞–≤–µ—Ä—à–µ–Ω–æ'),
        ('rejected', '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ'),
    ]
    
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    message_text = models.TextField()
    chat_id = models.CharField(max_length=50)
    keyword_group = models.ForeignKey(KeywordGroup, on_delete=models.SET_NULL, null=True)
    crm_status = models.CharField(max_length=20, choices=CRM_STATUS_CHOICES, default='new')
    processed_at = models.DateTimeField(auto_now_add=True)
```

## API Endpoints

### Dashboard API
- `GET /dashboard/` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- `GET /dashboard/keywords/` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- `POST /dashboard/keywords/create/` - –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- `GET /dashboard/chats/` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º–∏ —á–∞—Ç–∞–º–∏
- `GET /dashboard/messages/` - CRM –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `GET /dashboard/api/status/` - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã (JSON)

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `GET /login/` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
- `POST /logout/` - –í—ã—Ö–æ–¥
- `GET /signup/` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

## Celery –∑–∞–¥–∞—á–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏
- `process_message_task` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `start_telegram_parser` - –ó–∞–ø—É—Å–∫ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä—Å–µ—Ä–∞
- `stop_telegram_parser` - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä—Å–µ—Ä–∞

### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
- `reset_daily_message_counter` - –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- `cleanup_old_messages` - –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
- `update_bot_statistics` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–∫–∞–∂–¥—ã–π —á–∞—Å)
- `health_check` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

## –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫

### –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã
- **Basic** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
  - 100 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–µ—Å—è—Ü
  - 3 –≥—Ä—É–ø–ø—ã –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
  - 5 –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —á–∞—Ç–æ–≤
  
- **Premium**:
  - 1000 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–µ—Å—è—Ü
  - 10 –≥—Ä—É–ø–ø –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
  - 20 –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —á–∞—Ç–æ–≤
  - –ò–ò-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
  
- **Business**:
  - 10000 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–µ—Å—è—Ü
  - –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ –≥—Ä—É–ø–ø –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
  - –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —á–∞—Ç–æ–≤
  - –ò–ò-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏
- Django –ª–æ–≥–∏: `logs/django.log`
- Telegram –ø–∞—Ä—Å–µ—Ä: `logs/telegram.log`
- Celery: –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Ñ–∞–π–ª—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Heartbeat –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- SSL/HTTPS –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
- Secure cookies
- XSS –∏ CSRF –∑–∞—â–∏—Ç–∞
- Content Security Policy

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í—Å–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `SECRET_KEY` - Django secret key
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –º–∞—Å—Ç–µ—Ä-–±–æ—Ç–∞
- `OPENAI_API_KEY` - API –∫–ª—é—á OpenAI
- `DB_PASSWORD` - –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **–ë–æ—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –≤ —á–∞—Ç–∞—Ö
2. **Celery –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω
3. **–ò–ò —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á OpenAI

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –¢–µ—Å—Ç—ã
python manage.py test

# –õ–∏–Ω—Ç–∏–Ω–≥
flake8 .

# –ú–∏–≥—Ä–∞—Ü–∏–∏
python manage.py makemigrations
python manage.py migrate
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE

## –ê–≤—Ç–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Telegram —á–∞—Ç–æ–≤ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π SaaS –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.